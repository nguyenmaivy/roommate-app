(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{508:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1847).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},601:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var s=r(5155),a=r(2115),l=r(9829),i=r(7586),n=r(5229),o=r(4985);let d=(0,l.io)("http://localhost:3001",{transports:["websocket"]});function c(e){let{room:t,onClose:r}=e,{user:l}=(0,o.J)(),[c,m]=(0,a.useState)([]),[h,x]=(0,a.useState)(""),u=(0,a.useRef)(null);return(0,a.useEffect)(()=>{var e;null==(e=u.current)||e.scrollIntoView({behavior:"smooth"})},[c]),(0,a.useEffect)(()=>{if(null==t?void 0:t.roomId)return console.log("\uD83D\uDCCC Joining room: ".concat(t.roomId)),d.emit("joinRoom",t.roomId),fetch("".concat("http://localhost:3001","/messages/").concat(t.roomId)).then(e=>e.json()).then(e=>{m(e.messages.map(e=>({...e,isOwn:e.senderId===l.id}))||[])}).catch(e=>console.error("❌ Fetch messages error:",e)),d.on("newMessage",e=>{m(t=>[...t,{...e,isOwn:e.sender==l.id}])}),()=>{d.off("newMessage")}},[t.roomId]),(0,s.jsx)("div",{className:"fixed inset-0 bg-black/35 flex items-center justify-end z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-sm h-full max-h-[80vh] flex flex-col",children:[(0,s.jsxs)("div",{className:"p-4 border-b bg-indigo-500 text-white rounded-t-xl flex justify-between items-center",children:[(0,s.jsxs)("h3",{className:"font-bold flex items-center",children:[(0,s.jsx)(i.A,{className:"w-5 h-5 mr-2"}),t.roomTitle||"Ph\xf2ng chat"]}),(0,s.jsx)("button",{onClick:r,className:"hover:text-gray-200",children:(0,s.jsx)(n.A,{className:"w-5 h-5"})})]}),(0,s.jsxs)("div",{className:"flex-grow p-4 space-y-3 overflow-y-auto",children:[c.map(e=>(0,s.jsx)("div",{className:"flex ".concat(e.isOwn?"justify-end":"justify-start"),children:(0,s.jsx)("div",{className:"max-w-xs px-4 py-2 rounded-xl text-sm ".concat(e.isOwn?"bg-indigo-600 text-white rounded-br-none":"bg-gray-200 text-gray-800 rounded-tl-none"),children:e.text})},e.messageId||e.createdAt)),(0,s.jsx)("div",{ref:u})]}),(0,s.jsx)("form",{onSubmit:e=>{if(e.preventDefault(),!h.trim())return;let r={roomId:t.roomId,sender:t.studentId,receiver:t.landlordId,text:h.trim()};d.emit("sendMessage",r),x("")},className:"p-4 border-t",children:(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)("input",{type:"text",value:h,onChange:e=>x(e.target.value),placeholder:"Nhập tin nhắn...",className:"flex-grow px-4 py-2 border border-gray-300 rounded-full focus:ring-indigo-500 focus:border-indigo-500"}),(0,s.jsx)("button",{type:"submit",className:"bg-indigo-600 text-white p-3 rounded-full hover:bg-indigo-700 transition",children:"➤"})]})})]})})}},1010:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1847).A)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},1360:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1847).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},1456:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1847).A)("layout-grid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]])},1873:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1847).A)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},2529:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1847).A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},3457:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1847).A)("heart",[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]])},4003:(e,t,r)=>{"use strict";r.d(t,{U9:()=>s,iK:()=>a});let s=[{key:"wifi",label:"Wifi"},{key:"wc",label:"WC ri\xeang"},{key:"airCon",label:"M\xe1y lạnh"},{key:"parking",label:"Chỗ để xe"},{key:"kitchen",label:"Bếp"}],a={STUDENT:"STUDENT",LANDLORD:"LANDLORD"}},4985:(e,t,r)=>{"use strict";r.d(t,{J:()=>o,UserProvider:()=>n});var s=r(5155),a=r(2115),l=r(8032);let i=(0,a.createContext)(void 0),n=e=>{let{children:t}=e,[r,n]=(0,a.useState)(null);return(0,a.useEffect)(()=>{(null==r?void 0:r.id)&&(l.s.emit("register",r.id),console.log("\uD83D\uDCE1 Registered user:",r.id))},[r]),(0,s.jsx)(i.Provider,{value:{user:r,setUser:n},children:t})},o=()=>{let e=(0,a.useContext)(i);if(!e)throw Error("useUser must be used within UserProvider");return e}},5229:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1847).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},6154:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1847).A)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]])},6203:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var s=r(5155),a=r(2619),l=r.n(a),i=r(1873),n=r(7217),o=r(6154),d=r(1010),c=r(1360),m=r(3457),h=r(7586),x=r(4003);function u(e){var t;let{room:r,currentUserId:a,userRole:u,toggleFavorite:g,onEdit:b,onDelete:p,onChat:y}=e,f=r.landlordId===a&&u===x.iK.LANDLORD,v=r.isFavorite,j=x.U9.filter(e=>r.amenities.includes(e.key)).map(e=>e.label).join(", ");return(0,s.jsxs)("div",{className:"bg-white border border-gray-100 shadow-xl rounded-xl overflow-hidden hover:shadow-2xl transition duration-300 transform hover:-translate-y-1 flex flex-col md:flex-row",children:[(0,s.jsx)("div",{className:"md:w-1/3 w-full h-48 md:h-auto overflow-hidden",children:(0,s.jsx)("img",{src:r.imageUrl||(null==(t=r.images)?void 0:t[0]),alt:r.title||r.address,className:"w-full h-full object-cover transition duration-300 hover:scale-105",onError:e=>{e.target.onerror=null,e.target.src="https://placehold.co/400x300/CCCCCC/333333?text=No+Image"}})}),(0,s.jsxs)("div",{className:"md:w-2/3 p-4 flex flex-col justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:r.title||r.address}),(0,s.jsxs)("p",{className:"text-3xl font-extrabold text-indigo-600 mb-3",children:[new Intl.NumberFormat("vi-VN").format(r.price)," VNĐ",(0,s.jsx)("span",{className:"text-sm font-normal text-gray-500",children:"/th\xe1ng"})]}),(0,s.jsxs)("div",{className:"space-y-1 text-sm text-gray-600",children:[(0,s.jsxs)("p",{className:"flex items-center",children:[(0,s.jsx)(i.A,{className:"w-4 h-4 mr-2 text-indigo-400"})," ",r.location||r.address]}),(0,s.jsxs)("p",{className:"flex items-center",children:[(0,s.jsx)(n.A,{className:"w-4 h-4 mr-2 text-indigo-400"})," ",r.area," m\xb2"]}),(0,s.jsxs)("p",{className:"flex items-center",children:[(0,s.jsx)(o.A,{className:"w-4 h-4 mr-2 text-indigo-400"})," Tiện \xedch: ",j||"Kh\xf4ng c\xf3"]})]})]}),(0,s.jsxs)("div",{className:"mt-4 flex flex-wrap gap-2",children:[f?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("button",{onClick:()=>b(r),className:"flex items-center px-4 py-2 text-sm font-medium text-white bg-green-500 rounded-lg hover:bg-green-600 transition",children:[(0,s.jsx)(d.A,{className:"w-4 h-4 mr-1"})," Sửa"]}),(0,s.jsxs)("button",{onClick:()=>p(r.id),className:"flex items-center px-4 py-2 text-sm font-medium text-white bg-red-500 rounded-lg hover:bg-red-600 transition",children:[(0,s.jsx)(c.A,{className:"w-4 h-4 mr-1"})," X\xf3a"]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("button",{onClick:()=>g(r.id),className:"flex items-center px-4 py-2 text-sm font-medium rounded-lg transition ".concat(v?"bg-red-500 text-white hover:bg-red-600":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:[(0,s.jsx)(m.A,{className:"w-4 h-4 mr-1 ".concat(v?"fill-white":"text-red-500")}),v?"Đ\xe3 lưu":"Lưu"]}),(0,s.jsxs)("button",{onClick:()=>y(r),className:"flex items-center px-4 py-2 text-sm font-medium text-white bg-indigo-500 rounded-lg hover:bg-indigo-600 transition",children:[(0,s.jsx)(h.A,{className:"w-4 h-4 mr-1"})," Chat ngay"]})]}),(0,s.jsx)(l(),{href:"/room/".concat(r.id),children:(0,s.jsx)("button",{className:"flex items-center px-4 py-2 text-sm font-medium text-white bg-blue-500 rounded-lg hover:bg-blue-600 transition",children:"Xem Chi Tiết"})})]})]})]})}},6377:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>f});var s=r(5155),a=r(2115),l=r(6651),i=r(2529),n=r(5229),o=r(508),d=r(1847);let c=(0,d.A)("building",[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]]),m=(0,d.A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var h=r(1456),x=r(6203),u=r(9168),g=r(601),b=r(4985),p=r(4003);let y={STUDENT:"STUDENT",LANDLORD:"LANDLORD"};function f(){let{user:e,setUser:t}=(0,b.J)(),[r,d]=(0,a.useState)([]),[f,v]=(0,a.useState)([]),j=(null==e?void 0:e.role)===y.LANDLORD,[w,N]=(0,a.useState)({location:"",minPrice:"",maxPrice:"",minArea:"",maxArea:"",amenities:[],showFavorites:!1}),[k,A]=(0,a.useState)(!1),[C,M]=(0,a.useState)(null),[T,D]=(0,a.useState)(null);(0,a.useEffect)(()=>{!async function(){try{let e=await fetch("".concat("http://localhost:3001","/rooms")),t=(await e.json()).rooms.map(e=>({...e,isFavorite:!1}));d(t)}catch(e){console.error("❌ Error loading rooms:",e),d([])}}()},[]);let P=(0,a.useCallback)(e=>{d(t=>t.map(t=>{if(t.id===e){let r=!t.isFavorite;return r?v(t=>[...t,e]):v(t=>t.filter(t=>t!==e)),{...t,isFavorite:r}}return t}))},[]),S=(0,a.useCallback)(e=>{M(e),A(!0)},[]),E=(0,a.useCallback)(async e=>{if(window.confirm("Bạn c\xf3 chắc chắn muốn x\xf3a ph\xf2ng trọ n\xe0y?"))try{if(!(await fetch("".concat("http://localhost:3001","/rooms/").concat(e),{method:"DELETE"})).ok)throw Error("Failed to delete");d(t=>t.filter(t=>t.id!==e)),console.log("✅ [DELETE] room ID: ".concat(e))}catch(e){console.error("❌ Delete error:",e)}},[]),I=(0,a.useCallback)(async e=>{try{if(C){if(!(await fetch("".concat("http://localhost:3001","/rooms/").concat(C.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)throw Error("Failed to update room");d(t=>t.map(t=>t.id===C.id?{...t,...e}:t)),console.log("✅ [PUT] Updated room ID: ".concat(C.id))}else{let t=await fetch("".concat("http://localhost:3001","/rooms"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Failed to create room");let r=await t.json();d(e=>[r,...e]),console.log("✅ [POST] Created new room ID: ".concat(r.id))}}catch(e){console.error("❌ Save room error:",e)}finally{M(null),A(!1)}},[C,null==e?void 0:e.id]),L=(0,a.useMemo)(()=>r.filter(t=>{if(w.location&&!(t.address||"").toLowerCase().includes(w.location.toLowerCase()))return!1;let r=t.price;if(w.minPrice&&r<Number(w.minPrice)||w.maxPrice&&r>Number(w.maxPrice))return!1;let s=t.area;return!(w.minArea&&s<Number(w.minArea)||w.maxArea&&s>Number(w.maxArea))&&(!(w.amenities.length>0)||!!w.amenities.every(e=>t.amenities.includes(e)))&&(!w.showFavorites||!!f.includes(t.id))&&(!j||t.landlordId===(null==e?void 0:e.id))&&(!!j||t.landlordId!==(null==e?void 0:e.id))}),[r,w,f,null==e?void 0:e.id]),U=e=>{let{name:t,value:r}=e.target;N(e=>({...e,[t]:r}))},F=()=>{N({location:"",minPrice:"",maxPrice:"",minArea:"",maxArea:"",amenities:[],showFavorites:!1})},O=async()=>{let e=await fetch("http://localhost:3001/switch-role",{method:"POST",credentials:"include"}),r=await e.json();t(e=>({...e,role:r.role})),F()};return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50 font-sans antialiased",children:[(0,s.jsx)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,s.jsxs)("div",{className:"lg:flex lg:space-x-8",children:[(0,s.jsx)("div",{className:"lg:w-1/4 w-full mb-8 lg:mb-0",children:(0,s.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-lg sticky lg:top-24",children:[(0,s.jsxs)("h2",{className:"text-xl font-bold text-gray-800 mb-4 border-b pb-2 flex items-center",children:[(0,s.jsx)(l.A,{className:"w-5 h-5 mr-2 text-indigo-500"})," T\xecm kiếm & Lọc"]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Vị tr\xed (Quận/Huyện)"}),(0,s.jsx)("input",{type:"text",name:"location",value:w.location,onChange:U,placeholder:"VD: Quận 5, Thủ Đức",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Khoảng gi\xe1 (VNĐ)"}),(0,s.jsxs)("div",{className:"flex space-x-3",children:[(0,s.jsx)("input",{type:"number",name:"minPrice",value:w.minPrice,onChange:U,placeholder:"Min",className:"w-1/2 px-3 py-2 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500"}),(0,s.jsx)("input",{type:"number",name:"maxPrice",value:w.maxPrice,onChange:U,placeholder:"Max",className:"w-1/2 px-3 py-2 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500"})]})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Diện t\xedch (m\xb2)"}),(0,s.jsxs)("div",{className:"flex space-x-3",children:[(0,s.jsx)("input",{type:"number",name:"minArea",value:w.minArea,onChange:U,placeholder:"Min (m\xb2)",className:"w-1/2 px-3 py-2 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500"}),(0,s.jsx)("input",{type:"number",name:"maxArea",value:w.maxArea,onChange:U,placeholder:"Max (m\xb2)",className:"w-1/2 px-3 py-2 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500"})]})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tiện \xedch"}),(0,s.jsx)("div",{className:"grid grid-cols-2 gap-2",children:p.U9.map(e=>(0,s.jsxs)("button",{onClick:()=>{var t;return t=e.key,void N(e=>{let r=e.amenities.includes(t)?e.amenities.filter(e=>e!==t):[...e.amenities,t];return{...e,amenities:r}})},className:"flex items-center justify-center p-2 text-xs rounded-lg border transition ".concat(w.amenities.includes(e.key)?"bg-indigo-500 text-white border-indigo-500":"bg-gray-100 text-gray-700 border-gray-300 hover:bg-gray-200"),children:[(0,s.jsx)(i.A,{className:"w-3 h-3 mr-1"})," ",e.label]},e.key))})]}),(null==e?void 0:e.role)===y.STUDENT&&(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsxs)("label",{className:"flex items-center text-sm font-medium text-gray-700",children:[(0,s.jsx)("input",{type:"checkbox",checked:w.showFavorites,onChange:e=>N(t=>({...t,showFavorites:e.target.checked})),className:"rounded text-red-500 focus:ring-red-500 h-4 w-4 mr-2 border-gray-300"}),"Chỉ xem ph\xf2ng ",(0,s.jsx)("strong",{children:" Đ\xe3 Lưu"})," (",f.length,")"]})}),(0,s.jsxs)("button",{onClick:F,className:"w-full py-2 text-sm bg-gray-100 text-gray-600 rounded-lg hover:bg-gray-200 transition font-medium border border-gray-300 flex items-center justify-center",children:[(0,s.jsx)(n.A,{className:"w-4 h-4 mr-1"})," X\xf3a bộ lọc"]}),(0,s.jsxs)("button",{onClick:O,className:"w-full mt-4 py-2 text-sm bg-indigo-100 text-indigo-700 rounded-lg hover:bg-indigo-200 transition font-medium border border-indigo-300 flex items-center justify-center",children:[(0,s.jsx)(o.A,{className:"w-4 h-4 mr-1"})," Đổi vai tr\xf2 (",null==e?void 0:e.role,")"]})]})}),(0,s.jsxs)("div",{className:"lg:w-3/4 w-full",children:[j&&(0,s.jsxs)("div",{className:"mb-6 p-4 bg-indigo-50 rounded-xl border border-indigo-200 flex justify-between items-center shadow-md",children:[(0,s.jsxs)("h2",{className:"text-xl font-bold text-indigo-700 flex items-center",children:[(0,s.jsx)(c,{className:"w-6 h-6 mr-2"})," Quản l\xfd tin đăng của bạn"]}),(0,s.jsxs)("button",{onClick:()=>{M(null),A(!0)},className:"flex items-center px-4 py-2 text-sm font-bold text-white bg-indigo-600 rounded-lg shadow-lg hover:bg-indigo-700 transition",children:[(0,s.jsx)(m,{className:"w-5 h-5 mr-1"})," Đăng tin mới"]})]}),(0,s.jsxs)("h2",{className:"text-2xl font-bold text-gray-800 mb-6 flex items-center",children:[(0,s.jsx)(h.A,{className:"w-6 h-6 mr-2 text-indigo-500"}),j?"Ph\xf2ng trọ đ\xe3 đăng":"Danh s\xe1ch ph\xf2ng trọ"," (",L.length,")"]}),(0,s.jsx)("div",{className:"space-y-6",children:L.length>0?L.map(t=>(0,s.jsx)(x.A,{room:t,currentUserId:null==e?void 0:e.id,userRole:null==e?void 0:e.role,toggleFavorite:P,onEdit:S,onDelete:E,onChat:()=>{D({roomId:"".concat(t.id,"_").concat(null==e?void 0:e.id),landlordId:t.landlordId,studentId:null==e?void 0:e.id,roomTitle:t.title})}},t.id)):(0,s.jsxs)("div",{className:"text-center p-12 bg-white rounded-xl shadow-lg",children:[(0,s.jsx)("p",{className:"text-xl text-gray-500 font-medium",children:"Kh\xf4ng t\xecm thấy ph\xf2ng trọ n\xe0o ph\xf9 hợp với ti\xeau ch\xed lọc."}),(0,s.jsx)("p",{className:"text-gray-400 mt-2",children:"H\xe3y thử điều chỉnh lại bộ lọc của bạn."})]})})]})]})}),k&&j&&(0,s.jsx)(u.A,{roomToEdit:C,onClose:()=>A(!1),onSave:I}),T&&(0,s.jsx)(g.A,{room:T,onClose:()=>D(null)})]})}},6651:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1847).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},7217:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1847).A)("ruler",[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]])},7586:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1847).A)("message-square",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]])},8032:(e,t,r)=>{"use strict";r.d(t,{s:()=>s});let s=(0,r(9829).io)("http://localhost:3001",{transports:["websocket"],autoConnect:!0})},9168:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r(5155),a=r(2115),l=r(5229),i=r(4003);function n(e){let{roomToEdit:t,onClose:r,onSave:n}=e,[o,d]=(0,a.useState)(t||{title:"",location:"",price:"",area:"",amenities:[],imageUrl:"",description:""}),c=!!t,m=e=>{let{name:t,value:r}=e.target;d(e=>({...e,[t]:r}))},h=e=>{let{label:t,name:r,type:a="text",placeholder:l,value:i,required:n=!0}=e;return(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t}),(0,s.jsx)("input",{type:a,name:r,value:i,onChange:m,placeholder:l,required:n,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500"})]})};return(0,s.jsx)("div",{className:"fixed inset-0 bg-black/25 flex items-center justify-center p-4 z-50",children:(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-h-[90vh] overflow-y-auto w-full max-w-lg p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6 border-b pb-3",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:c?"Sửa Ph\xf2ng Trọ":"Đăng Tin Ph\xf2ng Trọ Mới"}),(0,s.jsx)("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition",children:(0,s.jsx)(l.A,{className:"w-6 h-6"})})]}),(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),n(o),r()},children:[(0,s.jsx)(h,{label:"Ti\xeau đề",name:"title",placeholder:"Ph\xf2ng trọ đẹp, full nội thất...",value:o.title}),(0,s.jsx)(h,{label:"Địa chỉ/Khu vực",name:"location",placeholder:"Quận 1, TP.HCM",value:o.location}),(0,s.jsx)(h,{label:"Gi\xe1 (VNĐ/th\xe1ng)",name:"price",type:"number",placeholder:"4500000",value:o.price}),(0,s.jsx)(h,{label:"Diện t\xedch (m\xb2)",name:"area",type:"number",placeholder:"25",value:o.area}),(0,s.jsx)(h,{label:"URL H\xecnh ảnh (M\xf4 phỏng S3)",name:"imageUrl",placeholder:"https://placehold.co/400x300...",value:o.imageUrl,required:!1}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tiện \xedch"}),(0,s.jsx)("div",{className:"grid grid-cols-2 gap-2",children:i.U9.map(e=>(0,s.jsxs)("label",{className:"flex items-center text-sm font-medium text-gray-700",children:[(0,s.jsx)("input",{type:"checkbox",checked:o.amenities.includes(e.key),onChange:()=>{var t;return t=e.key,void d(e=>{let r=e.amenities.includes(t)?e.amenities.filter(e=>e!==t):[...e.amenities,t];return{...e,amenities:r}})},className:"rounded text-indigo-600 focus:ring-indigo-500 h-4 w-4 mr-2 border-gray-300"}),e.label]},e.key))})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"M\xf4 tả chi tiết"}),(0,s.jsx)("textarea",{name:"description",value:o.description,onChange:m,rows:"3",placeholder:"M\xf4 tả chi tiết về ph\xf2ng trọ v\xe0 c\xe1c quy định...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,s.jsx)("button",{type:"submit",className:"w-full py-3 px-4 bg-indigo-600 text-white font-bold rounded-lg hover:bg-indigo-700 transition",children:c?"Lưu Thay Đổi":"Đăng Tin Mới"})]})]})})}},9458:(e,t,r)=>{Promise.resolve().then(r.bind(r,6377))}},e=>{e.O(0,[297,829,441,255,358],()=>e(e.s=9458)),_N_E=e.O()}]);