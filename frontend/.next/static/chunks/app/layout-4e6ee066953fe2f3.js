(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{63:(e,t,r)=>{"use strict";var s=r(7260);r.o(s,"useParams")&&r.d(t,{useParams:function(){return s.useParams}}),r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},508:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1847).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},1290:()=>{},2061:(e,t,r)=>{Promise.resolve().then(r.bind(r,4985)),Promise.resolve().then(r.bind(r,2338)),Promise.resolve().then(r.bind(r,7682)),Promise.resolve().then(r.t.bind(r,5404,23)),Promise.resolve().then(r.t.bind(r,8245,23)),Promise.resolve().then(r.t.bind(r,1290,23)),Promise.resolve().then(r.bind(r,7057))},2338:(e,t,r)=>{"use strict";r.d(t,{default:()=>o});var s=r(5155),n=r(63);function a(){return(0,s.jsx)("footer",{className:"bg-gray-900 text-white mt-12",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-8 mb-8",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Về Ph\xf2ng Trọ"}),(0,s.jsx)("p",{className:"text-gray-400",children:"Nền tảng t\xecm kiếm v\xe0 quản l\xfd ph\xf2ng trọ hiện đại"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Li\xean kết"}),(0,s.jsxs)("ul",{className:"space-y-2 text-gray-400",children:[(0,s.jsx)("li",{children:(0,s.jsx)("a",{href:"#",className:"hover:text-white",children:"Trang chủ"})}),(0,s.jsx)("li",{children:(0,s.jsx)("a",{href:"#",className:"hover:text-white",children:"Ph\xf2ng trọ"})}),(0,s.jsx)("li",{children:(0,s.jsx)("a",{href:"#",className:"hover:text-white",children:"Li\xean hệ"})})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Hỗ trợ"}),(0,s.jsxs)("ul",{className:"space-y-2 text-gray-400",children:[(0,s.jsx)("li",{children:(0,s.jsx)("a",{href:"#",className:"hover:text-white",children:"FAQ"})}),(0,s.jsx)("li",{children:(0,s.jsx)("a",{href:"#",className:"hover:text-white",children:"Điều khoản"})}),(0,s.jsx)("li",{children:(0,s.jsx)("a",{href:"#",className:"hover:text-white",children:"Ch\xednh s\xe1ch"})})]})]})]}),(0,s.jsx)("div",{className:"border-t border-gray-800 pt-8 text-center text-gray-400",children:(0,s.jsx)("p",{children:"\xa9 2025 Ph\xf2ng Trọ. Tất cả quyền được bảo lưu."})})]})})}function o(){return((0,n.usePathname)()||"").startsWith("/chat")?null:(0,s.jsx)(a,{})}},4985:(e,t,r)=>{"use strict";r.d(t,{J:()=>l,UserProvider:()=>i});var s=r(5155),n=r(2115),a=r(8032);let o=(0,n.createContext)(void 0),i=e=>{let{children:t}=e,[r,i]=(0,n.useState)(null);return(0,n.useEffect)(()=>{(null==r?void 0:r.id)&&(a.s.emit("register",r.id),console.log("\uD83D\uDCE1 Registered user:",r.id))},[r]),(0,s.jsx)(o.Provider,{value:{user:r,setUser:i},children:t})},l=()=>{let e=(0,n.useContext)(o);if(!e)throw Error("useUser must be used within UserProvider");return e}},5229:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1847).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},5404:e=>{e.exports={style:{fontFamily:"'Geist', 'Geist Fallback'",fontStyle:"normal"},className:"__className_188709"}},5993:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1847).A)("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]])},7057:(e,t,r)=>{"use strict";r.d(t,{Analytics:()=>h});var s=r(2115),n=r(63),a=r(5704);function o(){return"undefined"!=typeof window}function i(){return"production"}function l(){return"development"===((o()?window.vam:i())||"production")}function c(e){return new RegExp("/".concat(e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"(?=[/?#]|$)"))}function d(e){return(0,s.useEffect)(()=>{var t;e.beforeSend&&(null==(t=window.va)||t.call(window,"beforeSend",e.beforeSend))},[e.beforeSend]),(0,s.useEffect)(()=>{var t;!function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{debug:!0};if(!o())return;!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"auto";if("auto"===e){window.vam=i();return}window.vam=e}(t.mode),window.va||(window.va=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];(window.vaq=window.vaq||[]).push(t)}),t.beforeSend&&(null==(e=window.va)||e.call(window,"beforeSend",t.beforeSend));let r=t.scriptSrc?t.scriptSrc:l()?"https://va.vercel-scripts.com/v1/script.debug.js":t.basePath?"".concat(t.basePath,"/insights/script.js"):"/_vercel/insights/script.js";if(document.head.querySelector('script[src*="'.concat(r,'"]')))return;let s=document.createElement("script");s.src=r,s.defer=!0,s.dataset.sdkn="@vercel/analytics"+(t.framework?"/".concat(t.framework):""),s.dataset.sdkv="1.5.0",t.disableAutoTrack&&(s.dataset.disableAutoTrack="1"),t.endpoint?s.dataset.endpoint=t.endpoint:t.basePath&&(s.dataset.endpoint="".concat(t.basePath,"/insights")),t.dsn&&(s.dataset.dsn=t.dsn),s.onerror=()=>{let e=l()?"Please check if any ad blockers are enabled and try again.":"Be sure to enable Web Analytics for your project and deploy again. See https://vercel.com/docs/analytics/quickstart for more information.";console.log("[Vercel Web Analytics] Failed to load script from ".concat(r,". ").concat(e))},l()&&!1===t.debug&&(s.dataset.debug="false"),document.head.appendChild(s)}({framework:e.framework||"react",basePath:null!=(t=e.basePath)?t:function(){if(void 0!==a&&void 0!==a.env)return a.env.REACT_APP_VERCEL_OBSERVABILITY_BASEPATH}(),...void 0!==e.route&&{disableAutoTrack:!0},...e})},[]),(0,s.useEffect)(()=>{e.route&&e.path&&function(e){var t;let{route:r,path:s}=e;null==(t=window.va)||t.call(window,"pageview",{route:r,path:s})}({route:e.route,path:e.path})},[e.route,e.path]),null}function m(e){let{route:t,path:r}=(()=>{let e=(0,n.useParams)(),t=(0,n.useSearchParams)(),r=(0,n.usePathname)();return e?{route:function(e,t){if(!e||!t)return e;let r=e;try{let e=Object.entries(t);for(let[t,s]of e)if(!Array.isArray(s)){let e=c(s);e.test(r)&&(r=r.replace(e,"/[".concat(t,"]")))}for(let[t,s]of e)if(Array.isArray(s)){let e=c(s.join("/"));e.test(r)&&(r=r.replace(e,"/[...".concat(t,"]")))}return r}catch(t){return e}}(r,Object.keys(e).length?e:Object.fromEntries(t.entries())),path:r}:{route:null,path:r}})();return s.createElement(d,{path:r,route:t,...e,basePath:function(){if(void 0!==a&&void 0!==a.env)return a.env.NEXT_PUBLIC_VERCEL_OBSERVABILITY_BASEPATH}(),framework:"next"})}function h(e){return s.createElement(s.Suspense,{fallback:null},s.createElement(m,{...e}))}},7682:(e,t,r)=>{"use strict";r.d(t,{default:()=>p});var s=r(5155),n=r(2115),a=r(5993),o=r(508),i=r(1847);let l=(0,i.A)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]);var c=r(2619),d=r.n(c),m=r(5229);let h=(0,i.A)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),u=(0,i.A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var x=r(4985);function f(e){let{isOpen:t,mode:r,onClose:a,onLoginSuccess:o}=e,{user:i,setUser:l}=(0,x.J)(),[c,d]=(0,n.useState)("login"==r),[f,p]=(0,n.useState)(!1),[g,b]=(0,n.useState)({email:"",password:"",fullName:"",confirmPassword:""}),[w,y]=(0,n.useState)({});if((0,n.useEffect)(()=>{d("login"===r)},[r]),!t)return null;let v=e=>{let{name:t,value:r}=e.target;b(e=>({...e,[t]:r})),w[t]&&y(e=>{let r={...e};return delete r[t],r})},j=async e=>{if(e.preventDefault(),(()=>{let e={};return g.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(g.email)||(e.email="Email kh\xf4ng hợp lệ"):e.email="Email kh\xf4ng được để trống",g.password?g.password.length<6&&(e.password="Mật khẩu phải c\xf3 \xedt nhất 6 k\xfd tự"):e.password="Mật khẩu kh\xf4ng được để trống",c||(g.fullName||(e.fullName="T\xean đầy đủ kh\xf4ng được để trống"),g.password!==g.confirmPassword&&(e.confirmPassword="Mật khẩu x\xe1c nhận kh\xf4ng khớp")),y(e),0===Object.keys(e).length})())try{let e=await fetch(c?"http://localhost:3001/login":"http://localhost:3001/register",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(c?{email:g.email,password:g.password}:{email:g.email,password:g.password,name:g.fullName})}),t=await e.json();if(!e.ok)return void y({apiError:t.error||"C\xf3 lỗi xảy ra"});o({name:t.user.name,email:t.user.email,role:t.user.role}),l({id:t.user.email,name:t.user.name,role:t.user.role}),b({email:"",password:"",fullName:"",confirmPassword:""}),a()}catch(e){y({apiError:"Kh\xf4ng thể kết nối server"})}};return(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md max-h-screen overflow-y-auto",children:[(0,s.jsxs)("div",{className:"bg-gradient-to-r from-indigo-600 to-indigo-500 px-6 py-8 flex justify-between items-center",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-white",children:c?"Đăng Nhập":"Đăng K\xfd"}),(0,s.jsx)("button",{onClick:a,className:"text-white hover:bg-white/20 p-2 rounded-lg transition",children:(0,s.jsx)(m.A,{className:"w-5 h-5"})})]}),(0,s.jsxs)("form",{onSubmit:j,className:"p-6 space-y-4",children:[w.apiError&&(0,s.jsx)("p",{className:"text-red-500 text-sm text-center",children:w.apiError}),!c&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"T\xean đầy đủ"}),(0,s.jsx)("input",{type:"text",name:"fullName",value:g.fullName,onChange:v,placeholder:"Nhập t\xean của bạn",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition ".concat(w.fullName?"border-red-500":"border-gray-300")}),w.fullName&&(0,s.jsx)("p",{className:"text-red-500 text-xs mt-1",children:w.fullName})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),(0,s.jsx)("input",{type:"email",name:"email",value:g.email,onChange:v,placeholder:"your@email.com",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition ".concat(w.email?"border-red-500":"border-gray-300")}),w.email&&(0,s.jsx)("p",{className:"text-red-500 text-xs mt-1",children:w.email})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mật khẩu"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:f?"text":"password",name:"password",value:g.password,onChange:v,placeholder:"••••••••",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition pr-10 ".concat(w.password?"border-red-500":"border-gray-300")}),(0,s.jsx)("button",{type:"button",onClick:()=>p(!f),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:f?(0,s.jsx)(h,{className:"w-4 h-4"}):(0,s.jsx)(u,{className:"w-4 h-4"})})]}),w.password&&(0,s.jsx)("p",{className:"text-red-500 text-xs mt-1",children:w.password})]}),!c&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"X\xe1c nhận mật khẩu"}),(0,s.jsx)("input",{type:"password",name:"confirmPassword",value:g.confirmPassword,onChange:v,placeholder:"••••••••",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition ".concat(w.confirmPassword?"border-red-500":"border-gray-300")}),w.confirmPassword&&(0,s.jsx)("p",{className:"text-red-500 text-xs mt-1",children:w.confirmPassword})]}),(0,s.jsx)("button",{type:"submit",className:"w-full bg-gradient-to-r from-indigo-600 to-indigo-500 text-white font-semibold py-2 rounded-lg hover:from-indigo-700 hover:to-indigo-600 transition mt-6",children:c?"Đăng Nhập":"Đăng K\xfd"}),(0,s.jsxs)("p",{className:"text-center text-sm text-gray-600 mt-4",children:[c?"Chưa c\xf3 t\xe0i khoản?":"Đ\xe3 c\xf3 t\xe0i khoản?"," ",(0,s.jsx)("button",{type:"button",onClick:()=>{y({})},className:"text-indigo-600 font-semibold hover:underline",children:c?"Đăng k\xfd ngay":"Đăng nhập"})]})]})]})})}function p(){let{user:e,setUser:t}=(0,x.J)(),[r,i]=(0,n.useState)(!1),[c,m]=(0,n.useState)({open:!1,mode:"login"});(0,n.useEffect)(()=>{!async function(){try{let e=await fetch("http://localhost:3001/me",{credentials:"include"});if(!e.ok)return;let r=await e.json();t({id:r.user.email,name:r.user.name,role:r.user.role}),i(!0)}catch(e){}}()},[]);let h=async()=>{await fetch("http://localhost:3001/logout",{method:"POST",credentials:"include"}),t({}),i(!1)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("header",{className:"bg-white shadow-md sticky top-0 z-40",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center",children:[(0,s.jsxs)(d(),{href:"/",className:"text-3xl font-extrabold text-indigo-600 flex items-center",children:[(0,s.jsx)(a.A,{className:"w-8 h-8 mr-2"})," RoomMate"]}),(0,s.jsx)("div",{className:"flex items-center space-x-4",children:r?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"text-sm font-medium text-gray-700 flex items-center",children:[(0,s.jsx)(o.A,{className:"w-4 h-4 mr-1 text-indigo-500"}),(0,s.jsxs)("span",{children:["Xin ch\xe0o, ",(0,s.jsx)("strong",{children:e.name.split(" ")[0]})]})]}),(0,s.jsx)(d(),{href:"/search",className:"text-sm font-medium text-gray-700 hover:text-indigo-600",children:"T\xecm Ph\xf2ng"}),(0,s.jsx)(d(),{href:"/post-room",className:"text-sm font-medium text-gray-700 hover:text-indigo-600",children:"Đăng Tin"}),(0,s.jsx)(d(),{href:"/chat",className:"text-sm font-medium text-gray-700 hover:text-indigo-600",children:"Chat"}),(0,s.jsxs)("button",{onClick:h,className:"px-3 py-1 text-sm bg-red-500 text-white rounded-full hover:bg-red-600 transition font-medium flex items-center gap-1",children:[(0,s.jsx)(l,{className:"w-4 h-4"}),"Đăng xuất"]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d(),{href:"/search",className:"text-sm font-medium text-gray-700 hover:text-indigo-600",children:"T\xecm Ph\xf2ng"}),(0,s.jsx)("button",{onClick:()=>m({open:!0,mode:"login"}),className:"px-4 py-2 text-sm font-medium text-indigo-600 border border-indigo-600 rounded hover:bg-indigo-50 transition",children:"Đăng nhập"}),(0,s.jsx)("button",{onClick:()=>m({open:!0,mode:"signup"}),className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded hover:bg-indigo-700 transition",children:"Đăng k\xfd"})]})})]})}),(0,s.jsx)(f,{isOpen:c.open,onClose:()=>m({open:!1,mode:"login"}),onLoginSuccess:e=>{t(e),i(!0)},mode:c.mode})]})}},8032:(e,t,r)=>{"use strict";r.d(t,{s:()=>s});let s=(0,r(9829).io)("http://localhost:3001",{transports:["websocket"],autoConnect:!0})},8245:e=>{e.exports={style:{fontFamily:"'Geist Mono', 'Geist Mono Fallback'",fontStyle:"normal"},className:"__className_9a8899"}}},e=>{e.O(0,[490,297,829,441,255,358],()=>e(e.s=2061)),_N_E=e.O()}]);