# Local development (no AWS required)

This guide shows how to run the RoomMate project locally without deploying to AWS. We'll run:

- DynamoDB Local (optional — you can use an in-memory mock or skip for simple UI work)
- Backend (simple Express wrapper that calls Lambda handlers)
- Frontend (Next.js dev server)
- n8n (via docker-compose)

Prerequisites
-------------

- Node.js >= 18
- npm or pnpm
- Docker (for n8n and optionally DynamoDB Local as a container)

Quick steps
-----------

1. Start DynamoDB Local (optional)

   Option A — Docker (recommended):

   ```powershell
   docker run -d --name dynamodb-local -p 8000:8000 amazon/dynamodb-local
   ```

   Option B — jar (if you prefer): download `DynamoDBLocal.zip` from AWS and run `java -jar DynamoDBLocal.jar -inMemory -port 8000`.

2. Install backend deps and run local server

   ```powershell
   cd backend
   npm install

   # set DYNAMODB_ENDPOINT so handlers use local DynamoDB
   $env:DYNAMODB_ENDPOINT = 'http://host.docker.internal:8000' # or 'http://127.0.0.1:8000'
   node local-server.js
   ```

   The server listens on http://localhost:3001 and exposes endpoints:
   - POST /rooms (create)
   - GET /rooms (list)
   - GET /rooms/:id (get by id)

3. Frontend

   If frontend has dependencies (create `.env.local` in `frontend/`):

   ```text
   NEXT_PUBLIC_MAPBOX_TOKEN=your_mapbox_token
   NEXT_PUBLIC_API_URL=http://localhost:3001
   ```

   Then run:

   ```powershell
   cd frontend
   npm install
   npm run dev
   ```

   Open http://localhost:3000

4. n8n (automation)

   From project `automation/` folder run the provided compose to start n8n:

   ```powershell
   cd automation
   docker compose -f .\docker-compose.n8n.yml up -d
   ```

   Import workflows from `automation/workflows/` using n8n UI (http://localhost:5678).

Notes & tips
------------

- The local backend uses the Lambda handler code directly; if your handlers expect environment variables (MAPBOX_TOKEN, table names), set them when running the server.
- If you don't want to run DynamoDB Local, the backend will try to access AWS real DynamoDB — not recommended.
- For quick UI work (map, layout), you can stub API responses in the frontend or point `NEXT_PUBLIC_API_URL` to a small JSON server.

If you want, I can:

- Add a `dev` npm script in the `backend/package.json` to run the local server with `nodemon`.
- Create example `.env.local` and a small mock dataset for frontend testing.

---
Generated by assistant: local run helper for RoomMate project.
